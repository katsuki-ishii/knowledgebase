---
base: "[[ナレッジベース.base]]"
作成者: Katsubo Katsubo
カテゴリー:
  - JavaScript
作成日時: 2025-06-22T23:44:00
---
## 1. ブロックとは

- **ブロック**は、`{}`（中カッコ）で囲まれたコードのまとまり。
    - 例: `if`, `for`, `while`, 関数、単独の `{}` など
    - **例：**
```javascript
{
  // この中がブロック
  let x = 1;
}

```

## 2. ブロックスコープとは

- **ブロックスコープ**は、ブロック内で宣言された変数や定数が、そのブロックの外からアクセスできないというスコープ（範囲）のこと。
- `let` と `const` はブロックスコープを持つ。
- `var` はブロックスコープを持たず、「関数スコープ」になる。

### 例：

```javascript
if (true) {
  let a = 10; // aはこのブロック内でのみ有効
  const b = 20; // bも同じく
}
console.log(a); // エラー！aは外からアクセスできない

```

### varとの違い：

```javascript
if (true) {
  var c = 30; // cはブロック外でも有効
}
console.log(c); // 30 が表示される

```

---

## 3. なぜブロックスコープが重要？

- グローバルや関数の外で変数が暴走しない（バグ防止）
- for文などで一時的に使いたい変数の管理が楽
- コードの安全性、読みやすさUP

---

## 4. まとめ

- **ブロック** … `{}` で囲む部分
- **ブロックスコープ** … ブロック内限定のスコープ（`let`, `const`）
- **varは例外** … ブロックスコープなし（関数スコープ）

---

## 5. チートシート

| 宣言方法 | ブロックスコープ | 関数スコープ | グローバルスコープ |
| --- | --- | --- | --- |
| var | × | ○ | ○ |
| let | ○ | ○ | ○ |
| const | ○ | ○ | ○ |

---

## 6. ちょいネタ（JSあるある）

- `for (var i = 0; i < 3; i++) {...}` で非同期処理すると、全て同じ値になる問題 → letを使うと解決
- let/constは再宣言できないが、varはできてしまう（これがトラブルの元）

---

## 7. よくある疑問Q&A

**Q. 関数の中でもlet/constはブロックスコープ？**

→ Yes！どこでも `{}` で囲まれていれば、そこでスコープが発生。

**Q. ブロックなしでlet/const使うとどうなる？**

→ そのスコープ（たとえば関数やグローバル）で有効。

**Q. varを使う場面は？**

→ 現代のJSではほぼ無し。歴史的事情。

---

## 8. 参考リンク

- [MDN: ブロックスコープ](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/block)
- [MDN: var, let, constの違い](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/var)

---

