---
base: "[[Web.Application.base]]"
作成者: Katsubo Katsubo
カテゴリー:
  - Web
作成日時: 2026-02-09T12:00:00
aliases: [MPA, Multi Page Application, multi page application, マルチページアプリケーション]
---

# [[MPA|MPA]]（[[MPA|Multi Page Application]]）

## 1. [[MPA]]とは何か

[[MPA]]（[[MPA|Multi Page Application]]）とは、**Webの最も基本的な仕組みをそのままアプリケーション化した構成**である。

Webの原型は次の流れで成り立っている。

```
ブラウザ → URLを指定 → サーバー → HTMLを返す → ブラウザが表示
```

[[MPA]]は、この流れを一切壊さずに拡張したものである。

---

### [[MPA]]の基本動作

[[MPA]]では、**[[URI・URL・URN|URL]]と画面が1対1で結びついている**。

例：

- `/login` → ログイン画面。
- `/users` → ユーザー一覧画面。
- `/users/123` → ユーザー詳細画面。

画面を移動するたびに、ブラウザは次の処理を行う。

1. 現在のページを破棄する。
2. 新しい[[URI・URL・URN|URL]]へHTTPリクエストを送る。
3. サーバーからHTMLを受け取る。
4. 画面全体を描き直す。

---

### [[MPA]]における「ページ」とは何か

[[MPA]]でいうページとは、

- ブラウザに表示される1枚のHTML。
- サーバーがその都度生成して返す結果。

を指す。

重要なのは、**ページはブラウザ側に保存・管理されない**という点である。

---

### 主導権は誰が持っているか

[[MPA]]では主導権は常にブラウザにある。

- いつリクエストを送るか。
- どの[[URI・URL・URN|URL]]にアクセスするか。
- 画面をいつ切り替えるか。

これらはすべてブラウザの標準挙動で決まる。

サーバーは「要求された[[URI・URL・URN|URL]]に対してHTMLを返す」だけである。

---

### [[MPA]]の本質的な特徴

- ページ遷移の主導権はブラウザにある。
- 画面は毎回サーバーからHTMLとして返される。
- [[URI・URL・URN|URL]]がそのまま画面の意味を持つ。
- JavaScriptは必須ではなく、補助的役割に留まる。

この構造が、以降の章で扱うすべての前提となる。

---

## 2. 「大量のHTMLファイルを置くのか？」という疑問

### 直感的な誤解

- `/users/1`
- `/users/2`
- `/users/3`

このような[[URI・URL・URN|URL]]があると、それぞれに対応するHTMLファイルが存在すると考えがちである。

### 実際の構造

HTMLは「完成品」ではなく「テンプレート」である。

```
/templates
  ├ layout.html
  ├ users.html
  └ user_detail.html
```

- 表示ページ数は無限である。
- テンプレート数は有限である。

[[URI・URL・URN|URL]]が増えてもHTMLファイルは増えない。

---

## 3. テンプレエンジンの実体とは何か

### テンプレエンジンは何者か

テンプレエンジンは、以下を行う**サーバー側ライブラリ**である。

- テンプレファイルを文字列として読み込む。
- 独自文法（例：`{{ }}`、`{% %}`）を解析する。
- データを埋め込み、HTML文字列を生成する。

### 重要な点

- 合成ルールは自分で実装しない。
- 既存のテンプレエンジンの文法を使う。

### 具体例（Jinja系）

```jinja
{% extends "layout.html" %}
{% block content %}
  <h1>ユーザー一覧</h1>
{% endblock %}
```

これは「自分で書く」が、「意味を定義する」わけではない。

---

## 4. バックエンドは何をしているのか

### バックエンドの役割

バックエンドは「画面を作らない」。

やることは以下に限定される。

1. リクエストを受け取る。
2. [[URI・URL・URN|URL]]とHTTPメソッドから処理を判断する。
3. ビジネスロジックを実行する。
4. 表示用データを準備する。
5. 使用するテンプレートを決める。

### 擬似コード例

```python
users = repository.find_all()
return render("users.html", users=users)
```

HTMLの合成はテンプレエンジンに[[ITと不完全さに惹かれる理由|完全]]に委譲される。

---

## 5. Nginx / Apache はどこに登場するか

### 役割

Nginx / Apache は以下を担う。

- HTTPリクエストの最初の受け口。
- 静的ファイルと動的処理の振り分け。
- バックエンドへの中継。

### 図解

```
[Browser]
    |
    v
[Nginx / Apache]
    |         \
    |          +--> 静的ファイル（CSS, 画像）
    v
[Backend App]
    |
    v
[Template Engine]
    |
    v
[HTML]
```

Nginx自身はHTMLを生成しない。

---

## 6. 「このボタンを押したら [[HTTPメソッド GET|GET]] /users」は誰が決めるのか

### 答え

HTMLとブラウザの仕様で決まる。

### 具体例（リンク）

```html
<a href="/users">ユーザー一覧</a>
```

- HTMLが「どこへ」行くかを定義する。
- ブラウザが自動的に [[HTTPメソッド GET|GET]] リクエストを送信する。

### formの場合

```html
<form action="/users" method="GET">
  <button type="submit">一覧</button>
</form>
```

JavaScriptは不要である。

---

## 7. HTTPメソッドはHTMLだけで定義できるのか

### HTMLが直接扱えるメソッド

- [[HTTPメソッド GET|GET]]。
- POST。

それ以外（PUT / DELETE など）はHTML単体では指定できない。

### [[MPA]]での現実的な運用

- 表示系：[[HTTPメソッド GET|GET]]。
- 状態変更系：POST。

削除や更新もPOSTで表現する。

---

## 8. [[MPA]]におけるJavaScriptの役割

JavaScriptは補助的存在である。

### 主な役割

- 入力[[DTOバリデーション|バリデーション]]。
- UIの動き（モーダル等）。
- 確認ダイアログ。
- 補助的なHTTPリクエスト。

### やらないこと

- ルーティング。
- 画面構成管理。
- HTML合成。

---

## 9. 役割分担の最終整理

| レイヤ | 役割 |
| ------ | ---- |
| HTML | 遷移と送信の定義 |
| ブラウザ | HTMLをHTTPに変換して実行 |
| Webサーバー | 受信と振り分け |
| バックエンド | 判断とデータ準備 |
| テンプレエンジン | HTML生成 |
| JS | UX補助 |

---

## 10. 本質的な一文

[[MPA]]とは、

「HTMLが意思を持ち、ブラウザが動き、サーバーが判断し、テンプレが形にする世界」である。

この前提を崩さない限り、[[MPA]]の理解は一貫する。
